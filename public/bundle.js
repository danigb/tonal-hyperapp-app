!function(){"use strict";function n(n,t){var e,r=arguments,o=[];for(he=arguments.length;he-- >2;)be.push(r[he]);for(;be.length;)if(Array.isArray(e=be.pop()))for(he=e.length;he--;)be.push(e[he]);else null!=e&&!0!==e&&!1!==e&&("number"==typeof e&&(e+=""),o.push(e));return"string"==typeof n?{tag:n,data:t||{},children:o}:n(t,o)}function t(n,t){return Array(t+1).join(n)}function e(n){return"number"==typeof n}function r(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function o(n,t,e){if("string"!=typeof n)return null;var o=ke.exec(n);if(!o||!t&&o[4])return null;var i={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length;var u=_e[i.step]+i.alt;return i.chroma=u<0?12+u:u%12,o[3]&&(i.oct=+o[3],i.midi=u+12*(i.oct+1),i.freq=r(i.midi,e)),t&&(i.tonicOf=o[4]),i}function i(n){return e(n)?n<0?t("b",-n):t("#",n):""}function u(n){return e(n)?""+n:""}function a(n,t,e){return null===n||void 0===n?null:n.step?a(n.step,n.alt,n.oct):n<0||n>6?null:Oe.charAt(n)+i(t)+u(e)}function m(n,t){if("string"!=typeof n)return null;var e=Ce.exec(n);if(!e)return null;var r={num:+(e[3]||e[8]),q:e[4]||e[6]};r.dir="-"===(e[2]||e[7])?-1:1;var o=(r.num-1)%7;return r.simple=o+1,r.type=Ne[o],r.alt=P(r.type,r.q),r.oct=Math.floor((r.num-1)/7),r.size=r.dir*(Fe[o]+r.alt+12*r.oct),!1!==t&&"M"===r.type&&"P"===r.q?null:r}function c(n){return Ne[(n-1)%7]}function P(n,t){var e="number"==typeof n?c(n):n;return"M"===t&&"M"===e?0:"P"===t&&"P"===e?0:"m"===t&&"M"===e?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?"P"===e?-t.length:-t.length-1:null}function M(n,t){return Array(Math.abs(t)+1).join(n)}function l(n,t){var e="number"==typeof n?c(Math.abs(n)):n;return 0===t?"M"===e?"M":"P":-1===t&&"M"===e?"m":t>0?M("A",t):t<0?M("d","P"===e?t:t+1):null}function s(n){return"number"==typeof n}function f(n){return Math.floor(7*n/12)}function d(n,t,e){var r=Ie[n]+7*t;return s(e)?[r,e-qe[n]-4*t]:[r]}function p(n){var t=(n+1)%7;return t<0?7+t:t}function h(n,t){var e=ze[p(n)],r=Math.floor((n+1)/7);return s(t)?[e,r,t+4*r+qe[e]]:[e,r]}function b(n,t,e){return e?["tnlp",[n,t],e]:["tnlp",[n,t]]}function v(n){return Array.isArray(n)&&"tnlp"===n[0]}function A(n,t,e,r){return r?["tnlp",d(n,t,e),r]:["tnlp",d(n,t,e)]}function g(n){return h.apply(null,n[1])}function y(n){return v(n)?n[2]?"ivl":"note":null}function j(n){return"note"===y(n)}function w(n){return"ivl"===y(n)}function x(n){return v(n)&&1===n[1].length}function k(n){return-1===n[2]?-1:1}function _(n){return-1===n[2]?-n[1][0]:n[1][0]}function O(n){return-1===n[2]?-n[1][1]:n[1][1]}function C(n){return 7*_(n)+12*O(n)}function F(n){var t=_(n);return 7*t-12*Math.floor(7*t/12)}function N(n){var t={};return function(e){return"string"!=typeof e?null:t[e]||(t[e]=n(e))}}function I(n){return De(n)||Ee(n)}function q(n){return j(n)?n:De(n)}function z(n){return w(n)?n:Ee(n)}function D(n){return v(n)?n:I(n)}function E(n){return j(n)?a.apply(null,g(n)):null}function B(n){if(!w(n))return null;var t=g(n),e=t[0]+1+7*t[2];return n[2]*e+l(e,t[1])}function G(n){return E(n)||B(n)}function S(n,t,e){return function(r){return function(o){if(n(o))return r(o);var i=t(o);return i?e(r(i)):null}}}function V(n,t){var e=y(t);if(!e)return null;var r=_(n)+_(t);if(x(t))return["tnlp",[r]];var o=O(n)+O(t);if("note"===e)return["tnlp",[r,o]];var i=C(n)+C(t)<0?-1:1;return["tnlp",[i*r,i*o],i]}function $(n,t){if(1===arguments.length)return function(t){return $(n,t)};var e=D(n),r=D(t),o=w(e)?V(e,r):w(r)?V(r,e):null;return n===e&&t===r?o:G(o)}function T(n,t){return arguments.length>1?T(n)(t):function(t){return $(n,b(t,0,1))}}function U(n,t){var e=y(t);if(!e)return null;var r=_(n)+_(t);if(x(t))return["tnlp",[r]];var o=O(n)+O(t);if("note"===e)return["tnlp",[r,o]];var i=C(n)+C(t)<0?-1:1;return["tnlp",[i*r,i*o],i]}function R(n,t){if(1===arguments.length)return function(t){return R(n,t)};var e=D(n),r=D(t);return e&&r?G(U(r,e)):null}function K(n,t){return 1===arguments.length?function(t){return K(n,t)}:R(t,n)}function L(n,t){if(1===arguments.length)return function(t){return K(n,t)};var e=D(n),r=D(t);return e&&r?G(U(e,r)):null}function H(n,t){return arguments.length>1?H(n)(t):function(t){return R(n,b(t,0,1))}}function J(n,t){if(!n||!t||n[1].length!==t[1].length)return null;var e=_(t)-_(n);if(x(n))return b(e,-Math.floor(7*e/12),1);var r=O(t)-O(n),o=C(t)-C(n)<0?-1:1;return b(o*e,o*r,o)}function W(n,t){return 1===arguments.length?function(t){return W(n,t)}:B(J(D(n),D(t)))}function Q(n,t){return W(t,n)}function X(n,t){var e=J(D(n),D(t));return e?C(e):null}function Y(n){return n||0===n}function Z(n,t){return arguments.length>1?Z(n)(t):function(t){return Re(t).map(n)}}function nn(n){return Re(n).filter(Y)}function tn(n,t){return arguments.length>1?tn(n)(t):function(t){return Re(t).filter(n)}}function en(n){if(!n)return-1/0;var t=7*_(n);return t+12*(O(n)||-Math.floor(t/12)-100)}function rn(n,t){return en(n)-en(t)}function on(n,t){return-rn(n,t)}function un(n,t){var e=1===arguments.length||!0===t?rn:!1===t?on:"function"==typeof t?t:rn;return n=Array.isArray(n)?n.slice():Re(n),fn(function(n){return n.sort(e).filter(Y)},n)}function an(n){return $(b(0,n,1))}function mn(n,t){var e=Re(t),r=e.length,o=(n%r+r)%r;return e.slice(o,r).concat(e.slice(0,o))}function cn(n,t){return fn(function(t){var e=t.length,r=(n%e+e)%e,o=t.slice(r,e),i=t.slice(0,r),u=X(o[e-r-1],i[0]);if(u<0){var a=Math.floor(u/12);n<0?o=o.map(an(a)):i=i.map(an(-a))}return o.concat(i)},t)}function Pn(n,t){if(1===arguments.length)return function(t){return Pn(n,t)};var e=Re(t);return Re(n).map(function(n){return e[n-1]||null})}function Mn(n){return n=Re(n),0===n.length?[[]]:Mn(n.slice(1)).reduce(function(t,e){return t.concat(n.map(function(t,r){var o=e.slice();return o.splice(r,0,n[0]),o}))},[])}function ln(n){return G(n)||n}function sn(n){return v(n)?G(n):Ue(n)?n.map(ln):n}function fn(n,t){if(1===arguments.length)return function(t){return fn(n,t)};var e=Re(t).map(D);return sn(n(e))}function dn(n){var t=Re(n);return t.length?nn(t.map(W(t[0]))):t}function pn(n){var t=[];n=Re(n);for(var e=1;e<n.length;e++)t.push(W(n[e-1],n[e]));return t}function hn(n,t){return arguments.length>1?hn(n)(t):function(t){return nn(Z($(t||"P1"),n))}}function bn(n){var t=Je.exec(n);return t?{letter:t[1].toUpperCase(),acc:t[2].replace(/x/g,"##"),oct:t[3],type:t[4]}:null}function vn(n){var t=bn(n);return t&&""===t.type?{step:(t.letter.charCodeAt(0)+3)%7,alt:"b"===t.acc[0]?-t.acc.length:t.acc.length,oct:t.oct.length?+t.oct:null}:null}function An(n){return"string"!=typeof n?null:void 0===We[n]?We[n]=vn(n):We[n]}function gn(n,t){return n=Math.round(n),(!0===t?tr:nr)[n%12]+(Math.floor(n/12)-1)}function yn(n){return console.warn("note.note() is deprecated. Use note.name()"),pr(n)}function jn(n){console.warn("Deprecated. Do you really need this?");var t=q(n);return t?_(t):null}function wn(n){return vr[(n-1)%7]}function xn(n){return-1===n?"-":""}function kn(n,t){return n+7*t}function _n(n,t,e,r){return xn(r)+kn(n,e)+Cn(n,t)}function On(n,t){return Array(Math.abs(t)+1).join(n)}function Cn(n,t){var e="number"==typeof n?wn(Math.abs(n)):n;return 0===t?"M"===e?"M":"P":-1===t&&"M"===e?"m":t>0?On("A",t):t<0?On("d","P"===e?t:t+1):null}function Fn(n){var t=z(n);return t?B(t):null}function Nn(n){var t=qn(n);return t?t.num:null}function In(n){var t=qn(n);return t?t.num*t.dir:null}function qn(n){var t=z(n);if(!t)return null;var e=g(t);return{num:e[0]+1+7*e[2],alt:e[1],dir:t[2]}}function zn(n){if(!n||n.num<1)return null;var t=Math.floor(n.num/8);return _n(n.num-7*t,n.alt||0,t,n.dir)}function Dn(n){var t=z(n);return t?C(t):null}function En(n){var t=n<0?-1:1,e=Math.abs(n),r=e%12,o=Math.floor(e/12);return t*(Ar[r]+7*o)+gr[r]}function Bn(n){var t=z(n),e=t?F(t):Math.round(n);return isNaN(e)?null:yr[Math.abs(e)%12]}function Gn(n){var t=z(n);return t?jr[g(t)[0]]:null}function Sn(n){return"number"==typeof n}function Vn(n){return"string"==typeof n}function $n(n){return void 0!==n}function Tn(n,t){return Math.pow(2,(n-69)/12)*(t||440)}function Un(n,t,e){if("string"!=typeof n)return null;var r=_r.exec(n);if(!r||!t&&r[4])return null;var o={letter:r[1].toUpperCase(),acc:r[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var i=Or[o.step]+o.alt;return o.chroma=i<0?12+i:i%12,r[3]&&(o.oct=+r[3],o.midi=i+12*(o.oct+1),o.freq=Tn(o.midi,e)),t&&(o.tonicOf=r[4]),o}function Rn(n){if((Sn(n)||Vn(n))&&n>=0&&n<128)return+n;var t=Un(n);return t&&$n(t.midi)?t.midi:null}function Kn(n){return Array.isArray(n)&&2===n.length?7*n[0]+12*n[1]+12:Rn(n)}function Ln(n,t){return!0===n||!1===n?function(t){return Ln(t,n)}:(n=Math.round(n),(!0===t?Fr:Cr)[n%12]+(Math.floor(n/12)-1))}function Hn(n,t){return n=!(!n&&0!==n)&&Math.pow(10,n),function(e){return e=t(e),null===e?null:n?Math.round(e*n)/n:e}}function Jn(n,t,e){return arguments.length>2?Jn(n,t)(e):Hn(t,function(t){var e=Kn(t);return e?Math.pow(2,(e-69)/12)*n:null})}function Wn(n,t,e){return arguments.length>2?Wn(n,t)(e):Hn(t,function(t){return 12*(Math.log(t)-Math.log(n))/Math.log(2)+69})}function Qn(n,t){return Ln(qr(n),t)}function Xn(n,t){var e=Ir(n)||n,r=Ir(t)||t;return Math.round(Math.log(r/e)/Math.log(2)*1200)}function Yn(n){return parseInt(nt(n),2)}function Zn(n){return n=D(n),n?F(n):null}function nt(n){if(rt(n))return n;var t=[0,0,0,0,0,0,0,0,0,0,0,0];return Z(Zn,n).forEach(function(n){t[n]=1}),t.join("")}function tt(n){console.warn("pcset.notes deprecated. Use collection.pcset");var t=Z(hr,n);if(!t.length)return t;var e=t[0];return it(mn(Zn(e),nt(t).split("")).join(""),e)}function et(n,t){t=!1!==t;var e=nt(n).split("");return nn(e.map(function(n,r){var o=mn(r,e);return t&&"0"===o[0]?null:o.join("")}))}function rt(n){return Dr.test(n)}function ot(n){return nn(nt(n).split("").map(function(n,t){return"1"===n?Er[t]:null}))}function it(n,t){return console.warn("pcset.fromChroma is deprecated. Use pcset.intervals().map(...)"),1===arguments.length?function(t){return it(n,t)}:(t||(t="P1"),ot(n).map($(t)))}function ut(n,t){return 1===arguments.length?function(t){return ut(n,t)}:nt(n)===nt(t)}function at(n,t){return((n=Yn(n))&Yn(t))===n}function mt(n,t){return((n=Yn(n))|Yn(t))===n}function ct(n,t){return arguments.length>1?ct(n)(t):(n=nt(n),function(t){return"1"===n[Zn(t)]})}function Pt(n,t){return 1===arguments.length?function(t){return Pt(n,t)}:Re(t).filter(ct(n))}function Mt(n){return"number"==typeof n}function lt(n){return Mt(n)?n:Kn(n)}function st(n,t){for(var e=[];t--;e[t]=t+n);return e}function ft(n,t){for(var e=[];t--;e[t]=n-t);return e}function dt(n,t){return null===n||null===t?[]:n<t?st(n,t-n+1):ft(n,n-t+1)}function pt(n){return Re(n).map(lt).reduce(function(n,t,e){if(1===e)return dt(n,t);var r=n[n.length-1];return n.concat(dt(r,t).slice(1))})}function ht(n,t){return Z(Ln(!0===t),pt(n))}function bt(n,t){return pt(t).map(T(n))}function vt(n,t){return 1===arguments.length?function(t){return vt(n,t)}:Pt(n,ht(t))}function At(n){var t="CDEFGAB".indexOf(n.toUpperCase());return t<0?null:t}function gt(n){return!(n<0||n>6)}function yt(n){return gt(n)?"CDEFGAB".charAt(n):null}function jt(n){return/^b+$/.test(n)}function wt(n){return/^#+$/.test(n)}function xt(n){return""===n?0:jt(n)?-n.length:wt(n)?n.length:null}function kt(n,t){return Array(t+1).join(n)}function _t(n){return n?n<0?kt("b",-n):kt("#",n):""}function Ot(n,t){return n?n+" "+t:t}function Ct(n){return Ot(T("C",n),"major")}function Ft(n){return $r[Vr.indexOf(n)]}function Nt(n){return n=n.trim().toLowerCase(),-1===Vr.indexOf(n)?null:n}function It(n){if("string"!=typeof n)return null;var t,e=n.indexOf(" ");if(-1===e){var r=hr(n);t=r?{tonic:r,mode:"major"}:{tonic:!1,mode:Nt(n)}}else t={tonic:hr(n.slice(0,e)),mode:Nt(n.slice(e+1))};return t.mode?t:null}function qt(n){return null!==It(n)}function zt(n){return(It(n)||n||{}).tonic||null}function Dt(n){return(It(n)||n||{}).mode||null}function Et(n,t){return 1===arguments.length?function(t){return Et(n,t)}:!(n=It(n))||n.tonic?null:(t=It(t))&&t.tonic?Ot(T(t.tonic,Ft(n.mode)-Ft(t.mode)),n.mode):null}function Bt(n){var t=Tt(n);return null===t?null:t<0?pt([-1,t]).map(T("F")):pt([1,t]).map(T("B"))}function Gt(n){return n?Vr.slice():Vr.slice(0,-2)}function St(n){return"number"==typeof n?Ct(n):null}function Vt(n){return wt(n)?Ct(n.length):jt(n)?Ct(-n.length):null}function $t(n){var t=It(n);return t&&t.tonic?hn(Tr[Vr.indexOf(t.mode)],t.tonic):null}function Tt(n){var t=It(n);if(!t||!t.tonic)return null;var e=Ft(t.mode);return jn(t.tonic)-e}function Ut(n){return _t(Tt(n))}function Rt(n,t){void 0===t&&(t=function(n){return n.split(" ")});var e=Object.keys(n).sort(),r={};e.forEach(function(e){r[e]=t(n[e][0]),(n[e][1]||[]).forEach(function(n){return r[n]=r[e]})});var o=Object.keys(r).sort(),i=function(n){return r[n]};return i.keys=function(n){return(n?o:e).slice()},i}function Kt(n,t){console.warn("@deprecated: use dictionary.build"),t=t||function(n){return n};var e={},r=Object.keys(n),o=[];return r.forEach(function(r){var i=t(n[r][0]);e[r]=i,n[r][1]&&n[r][1].forEach(function(n){e[n]=i,o.push(n)})}),{get:function(n){return e[n]},keys:function(n,t){var i=n?r.concat(o):r.slice();return"function"!=typeof t?i:i.filter(function(n){return t(n,e[n])})}}}function Lt(n,t){var e="string"==typeof t,r="function"==typeof t,o=n.keys(!1).reduce(function(t,e){return t[nt(n.get(e))]=e,t},{});return function(n){return nn(et(n=un(Z(hr,n))).map(function(i,u){var a=o[i];if(!a)return null;var m=n[u];return e?m+t+a:r?t(a,m):[a,m]}))}}function Ht(n,t){if(console.warn("@deprecated: use scale.intervals or scale.notes"),1===arguments.length)return function(t){return Ht(n,t)};var e=Wr.get(n);return e?hn(e,t):null}function Jt(n,t){var e=Yt(n);t=pr(t)||e.tonic;var r=Lr(e.type);return t&&r?r.map(R(hr(t))):[]}function Wt(n){var t=Yt(n);return Lr(t.type)||[]}function Qt(n){return void 0!==Lr(n)}function Xt(n){return console.warn("@renamed: use scale.exists"),Qt(n)}function Yt(n){if("string"!=typeof n)return null;var t=n.indexOf(" "),e=pr(n.substring(0,t))||!1;return{tonic:e,type:e?n.substring(t+1):n}}function Zt(){return eo}function ne(n,t){if(1===arguments.length)return function(t){return ne(n,t)};var e=ro.get(n);return e?hn(e,t):null}function te(n){var t=me(n),e=ro.get(t.type);return e?hn(e,t.tonic):nn(Z(pr,n))}function ee(n){var t=me(n);return ro.get(t.type)||[]}function re(n){return ee(n).length>0}function oe(n){var t=Z(hr,n),e=ue(t);return e?e.indexOf(t[0]):null}function ie(n,t){if(1===arguments.length)return function(t){return ie(n,t)};var e=ue(t);return e?mn(n,e):[]}function ue(n){for(var t=Mn(te(n).map(hr)),e=0;e<t.length;e++)if(ae(pn(t[e])))return t[e];return null}function ae(n){for(var t=0;t<n.length;t++)if("3"!==n[t][0])return!1;return!0}function me(n){var t=Zt().exec(n);return t?t[4]?"7"===t[3]||"6"===t[3]?{type:t[3]+t[4],tonic:t[1]+t[2]}:{type:t[4],tonic:t[1]+t[2]+t[3]}:{type:t[3],tonic:t[1]+t[2]}:{type:n,tonic:!1}}function ce(n,t){t=hr(t);var e=nn((n=Z(me,n)).map(function(n){return n.tonic}));return e.length!==n.length?null:e.map(function(e,r){var o=qn(W(t,e));return Pe(o.num-1,o.alt,n[r].type)})}function Pe(n,t,e){return _t(t)+ao[n%7]+(e||"")}function Me(n,t){return Z(function(n){var e=se(n);return e?$(e.root,t)+e.type:null},n)}function le(){return mo}function se(n){var t=mo.exec(n);if(!t)return null;var e=co[t[2].toLowerCase()]+1,r=t[1].length;return"b"===t[1][0]&&(r=-r),{root:zn({num:e,alt:r,dir:1}),type:t[3]}}function fe(n){var t,e,r,o=nn(Z(q,n)),i=o.length,u=[0,0,0,0,0,0];for(t=0;t<i;t++)for(e=t;e<i;e++)6===(r=Bn(F(o[e])-F(o[t])))?u[5]=u[5]+1:r>0&&(u[5-r]=u[5-r]+1);return u}function de(n){return un(n).filter(function(n,t,e){return 0===t||n!==e[t-1]})}function pe(t){var e=t.pc;return n("table",null,n("thead",null,n("tr",null,n("td",null,"Note"),n("td",null,"Midi"),n("td",null,"Frecuency"))),n("tbody",null,ho.map(function(t){return n("tr",null,n("td",null,n(Lo,{to:["note",e+t]},e+t)),n("td",null,po.midi(e+t)),n("td",null,po.freq(e+t).toFixed(3)))})))}var he,be=[],ve=[],Ae=function(n){return"https://www.npmjs.com/package/"+n+"/"},ge=function(n){return"https://nodei.co/npm/"+n+".png?mini=true"},ye=function(t){var e=t.name,r=t.packageName;return n("a",{href:Ae(r||"tonal-"+e)},n("img",{src:ge(r||"tonal-"+e)}))},je="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B B# Cb".split(" "),we=function(t){var e=t.id,r=t.label,o=t.route,i=t.oct,u=t.tonics;void 0===u&&(u=je);var a=0===i||i?i:"";return n("p",{id:e,class:"Tonics"},r&&n("label",null,r),u.map(function(t){return n(Lo,{to:o(t+a)},t+a)}))},xe=function(t){return n("pre",null,n("code",null,t.lines.join("\n")))},ke=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,_e=[0,2,4,5,7,9,11],Oe="CDEFGAB",Ce=new RegExp("^(?:(([-+]?)(\\d+)(d{1,4}|m|M|P|A{1,4}))|((AA|A|P|M|m|d|dd)([-+]?)(\\d+)))$"),Fe=[0,2,4,5,7,9,11],Ne="PMMPPMM",Ie=[0,2,4,-1,1,3,5],qe=Ie.map(f),ze=[3,0,4,1,5,2,6],De=N(function(n){var t=o(n);return t?A(t.step,t.alt,t.oct):null}),Ee=N(function(n){var t=m(n);return t&&t?A(t.simple-1,t.alt,t.oct,t.dir):null}),Be=S(j,De,E),Ge=S(w,Ee,B),Se=S(v,I,G),Ve=Object.freeze({pitch:b,isPitch:v,encode:A,decode:g,pType:y,isNotePitch:j,isIvlPitch:w,isPC:x,dir:k,fifths:_,focts:O,height:C,chr:F,parseNote:De,parseIvl:Ee,parsePitch:I,asNotePitch:q,asIvlPitch:z,asPitch:D,strNote:E,strIvl:B,strPitch:G,noteFn:Be,ivlFn:Ge,pitchFn:Se}),$e=Object.freeze({transpose:$,trFifths:T}),Te=Object.freeze({transpose:R,transposeBy:K,add:L,trFifths:H,interval:W,subtract:Q,semitones:X}),Ue=Array.isArray,Re=function(n){return function(t){return void 0===t?[]:Array.isArray(t)?t:"string"==typeof t?t.trim().split(n):[t]}}(/\s*\|\s*|\s*,\s*|\s+/),Ke=fn(function(n){for(var t,e,r=n.length;r;)t=Math.random()*r--|0,e=n[r],n[r]=n[t],n[t]=e;return n}),Le=Object.freeze({asArr:Re,map:Z,compact:nn,filter:tn,sort:un,shuffle:Ke,rotate:mn,rotateAsc:cn,select:Pn,permutations:Mn}),He=Object.freeze({harmonics:dn,intervallic:pn,harmonize:hn}),Je=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,We={},Qe=function(n){return function(t,e){return null!==(e=An(t))?n(e):null}},Xe=[0,2,4,5,7,9,11],Ye=Qe(function(n){return null!==n.oct?Xe[n.step]+n.alt+12*(n.oct+1):null}),Ze=function(n){return Ye(n)||+n||null},nr="C Db D Eb E F Gb G Ab A Bb B".split(" "),tr="C C# D D# E F F# G G# A A# B".split(" "),er=function(n,t){return null!==(t=Ze(n))?440*Math.pow(2,(t-69)/12):null},rr=Math.log(2),or=Math.log(440),ir=function(n){var t=12*(Math.log(n)-or)/rr+69;return Math.round(100*t)/100},ur=Qe(function(n){return(Xe[n.step]+n.alt+120)%12}),ar=Qe(function(n){return n.oct}),mr=function(n,t){return hr(t)+n},cr=Qe(function(n){return n.step}),Pr=Qe(function(n){return n.alt}),Mr=function(n){return"CDEFGAB"[n]},lr=function(n,t){return Array(t+1).join(n)},sr=function(n,t){return"number"!=typeof n?"":t(n)},fr=function(n){return sr(n,function(n){return n<0?lr("b",-n):lr("#",n)})},dr=function(n){return Mr(n.step)+fr(n.alt)+sr(n.oct,function(n){return n})},pr=Qe(function(n){return dr(n)}),hr=Qe(function(n){return Mr(n.step)+fr(n.alt)}),br=Object.freeze({split:bn,parse:An,midi:Ze,fromMidi:gn,freq:er,freqToMidi:ir,chroma:ur,note:yn,oct:ar,inOct:mr,step:cr,pcFifths:jn,alt:Pr,build:dr,name:pr,pc:hr}),vr="PMMPPMM",Ar=[1,2,2,3,3,4,5,5,6,6,7,7],gr="P m M m M P d P m M m M".split(" "),yr=[0,1,2,3,4,5,6,5,4,3,2,1],jr="PMMPPMM",wr=Ge(function(n){var t=g(n);return A((7-t[0])%7,"P"===jr[t[0]]?-t[1]:-(t[1]+1),t[2],k(n))}),xr=Ge(function(n){var t=g(n);return 0===t[0]&&1===t[2]||(t[2]=0),A(t[0],t[1],t[2],k(n))}),kr=Object.freeze({toInterval:Fn,num:Nn,value:In,props:qn,fromProps:zn,semitones:Dn,fromSemitones:En,ic:Bn,type:Gn,invert:wr,simplify:xr}),_r=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,Or=[0,2,4,5,7,9,11],Cr="C Db D Eb E F Gb G Ab A Bb B".split(" "),Fr="C C# D D# E F F# G G# A A# B".split(" "),Nr=Object.freeze({toMidi:Kn,note:Ln}),Ir=Jn(440,2),qr=Wn(440,2),zr=Object.freeze({eqTempFreq:Jn,toFreq:Ir,eqTempFreqToMidi:Wn,toMidi:qr,note:Qn,cents:Xn}),Dr=/^[01]{12}$/,Er="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" "),Br=Object.freeze({chroma:nt,notes:tt,modes:et,isChroma:rt,intervals:ot,fromChroma:it,isEqual:ut,isSubset:at,isSuperset:mt,includes:ct,filter:Pt}),Gr=Object.freeze({numeric:pt,chromatic:ht,fifths:bt,pitchSet:vt}),Sr=Object.freeze({toStep:At,isStep:gt,toLetter:yt,areFlats:jt,areSharps:wt,toAlt:xt,toAcc:_t}),Vr=["ionian","dorian","phrygian","lydian","mixolydian","aeolian","locrian","major","minor"],$r=[0,2,4,-1,1,3,5,0,3],Tr=[0,1,2,3,4,5,6,0,5].map(function(n){return dn(mn(n,["C","D","E","F","G","A","B"]))}),Ur=Ut,Rr=Object.freeze({props:It,isKeyName:qt,tonic:zt,mode:Dt,relative:Et,alteredNotes:Bt,modes:Gt,fromAlter:St,fromAcc:Vt,scale:$t,alteration:Tt,signature:Ut,accidentals:Ur}),Kr={M:["1P 3M 5P",["Major",""]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6:["1P 3M 5P 13M",["6"]],M69:["1P 3M 5P 6M 9M",["69"]],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],addb9:["1P 3M 5P 9m"],m:["1P 3m 5P"],m11:["1P 3m 5P 7m 9M 11P",["_11"]],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"],4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m#5":["1P 3m 5A",["m+","mb6"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m7#5":["1P 3m 6m 7m"],"m9#5":["1P 3m 6m 7m 9M"],"+add#9":["1P 3M 5A 9A"]},Lr=Rt({chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],prometheus:["1P 2M 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],diminished:["1P 2M 3m 4P 5d 6m 6M 7M"],egyptian:["1P 2M 4P 5P 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],spanish:["1P 2m 3M 4P 5P 6m 7m",["phrygian major"]],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]}),Hr=Rt(Kr);(function(n){return Lr(n)||Hr(n)}).keys=function(n){return Lr.keys(n).concat(Hr.keys(n))};var Jr=function(n,t){void 0===t&&(t=nt);var e={};n.keys(!0).forEach(function(r){var o=t(n(r));e[o]=e[o]||[],e[o].push(r)});var r=function(n){return e[n]||[]};return r.keys=function(){return Object.keys(e)},r},Wr=Kt({chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],prometheus:["1P 2M 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],diminished:["1P 2M 3m 4P 5d 6m 6M 7M"],egyptian:["1P 2M 4P 5P 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],spanish:["1P 2m 3M 4P 5P 6m 7m",["phrygian major"]],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},function(n){return n.split(" ")}),Qr=Lr.keys,Xr=Lt(Wr," "),Yr=null,Zr=function(n){return Yr||(Yr=Jr(Lr)),Yr(n)},no=function(n,t){var e=Yt(n);t=pr(t)||e.tonic;var r=Wt(e.type);if(!t||!r)return[];var o=r.map(R(t));return et(r).map(function(n,t){var e=Zr(n)[0];return e?o[t]+" "+e:null})},to=Object.freeze({get:Ht,names:Qr,notes:Jt,intervals:Wt,exists:Qt,isKnowScale:Xt,parseName:Yt,detect:Xr,modes:no}),eo=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,ro=Kt({M:["1P 3M 5P",["Major",""]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6:["1P 3M 5P 13M",["6"]],M69:["1P 3M 5P 6M 9M",["69"]],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],addb9:["1P 3M 5P 9m"],m:["1P 3m 5P",["minor"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"],4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],"m#5":["1P 3m 5A",["m+","mb6"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],"m7#5":["1P 3m 6m 7m"],"m9#5":["1P 3m 6m 7m 9M"],"+add#9":["1P 3M 5A 9A"]},function(n){return n.split(" ")}),oo=ro.keys,io=Lt(ro,""),uo=Object.freeze({names:oo,get:ne,notes:te,intervals:ee,isKnownChord:re,detect:io,position:oe,inversion:ie,parse:me}),ao=["I","II","III","IV","V","VI","VII"],mo=/^\s*(b|bb|#|##|)(IV|III|II|I|VII|VI|V|iv|iii|ii|i|vii|vi|v)\s*(.*)\s*$/,co={i:0,ii:1,iii:2,iv:3,v:4,vi:5,vii:6},Po=Object.freeze({abstract:ce,buildRoman:Pe,concrete:Me,romanRegex:le,parseRomanChord:se}),Mo=Object.freeze({density:fe}),lo=Object.freeze({notes:de}),so=Object.assign,fo=so({},Le,$e,He,Te);fo.pitch=Ve,fo.notation=Sr,fo.note=br,fo.ivl=kr,fo.midi=Nr,fo.freq=zr,fo.range=Gr,fo.key=Rr,fo.progression=Po,fo.sonority=Mo,fo.pitchset=lo,fo.pcset=Br,fo.scale=function(n){return fo.scale.notes(n)},so(fo.scale,to),fo.chord=function(n){return fo.chord.notes(n)},so(fo.chord,uo),"undefined"!=typeof window&&(window.Tonal=fo);var po=fo.note,ho=[1,2,3,4,5,6],bo=function(n){return null===n?"null":n},vo=function(n,t){return"number"==typeof t?t.toFixed(n):"null"},Ao=function(n){return JSON.stringify(n,null,2)},go=function(n){return n?'"'+n+'"':"null"},yo=function(n){return"https://github.com/danigb/tonal/tree/master/packages/tonal/note#module_note."+n},jo=function(t){var e=t.tonic;e=po.note(e),console.log(e);var r=po.pc(e),o=po.freq(e),i=po.midi(e);return n("div",{class:"Note"},r&&n("h4",null,"note"),r?n("h1",{class:"note"},e):n("h1",null,"Notes"),o&&n("div",{class:"properties"},n("h3",null,"freq: ",o.toFixed(2),"Hz ",n("br",null),"midi: ",i)),n(we,{label:"Choose note:",oct:po.oct(e),route:function(n){return["note",n]}}),r&&n(we,{label:"Change octave:",tonics:[r].concat(ho.map(function(n){return r+n})),route:function(n){return["note",n]}}),n(ye,{packageName:"tonal-note"}),n(xe,{lines:['import note from "tonal-note"']}),n("p",null,"Or using tonal facade:"),n(xe,{lines:['import tonal from "tonal"','tonal.note.midi("C4");']}),n("h3",null,"API"),n("p",null,Object.keys(fo.note).sort().map(function(t){return n("a",{class:"api",href:yo(t),target:"_blank"},t)})),n("h3",null,"Properties"),n(xe,{lines:["note.split("+go(e)+") // => "+Ao(po.split(e)),"note.parse("+go(e)+") // => "+Ao(po.parse(e)),"note.step("+go(e)+") //=> "+bo(po.step(e)),"note.alt("+go(e)+") //=> "+bo(po.alt(e)),"note.oct("+go(e)+") //=> "+bo(po.oct(e)),"note.chroma("+go(e)+") //=> "+bo(po.chroma(e))]}),n("h3",null,"Midi and frequency"),n(xe,{lines:['note.freq("'+e+'") => '+bo(o),"note.fromFreq("+vo(2,o)+") => "+e,'note.midi("'+e+'") => '+i,"note.fromMidi("+i+") => "+e]}),n("h3",null,"Octaves"),n("pre",null,n("code",null,'note.inOct(4, "',e,'") // => ',bo(po.inOct(4,e)))),r&&n(pe,{pc:po.pc(e)}))},wo=function(t){var e=t.size;void 0===e&&(e=80);var r=t.offset;void 0===r&&(r=0);var o=t.chroma;void 0===o&&(o="0");var i=t.type;void 0===i&&(i="set");var u=e/2,a=e/2-.1*e/2,m=2*Math.PI/o.length,c=o.split("").reduce(function(n,t,e){return"1"===t&&(n.push(u+a*Math.cos((r+e-3)*m)),n.push(u+a*Math.sin((r+e-3)*m))),n},[]);return n("svg",{class:"Circle "+i,width:e,height:e,viewBox:"0 0 "+e+" "+e},n("circle",{class:"background",cx:u,cy:u,r:a}),n("circle",{class:"tonic",cx:c[0],cy:c[1],r:2}),n("polygon",{class:"overlay",points:c.join(" ")}))},xo=function(n,t){return fo.pcset.chroma(fo[n].intervals(t))},ko=function(n,t,e){return e||fo[n].parseName(t).tonic},_o=function(t){var e=t.type,r=t.names,o=t.tonic;return n("table",null,n("thead",null,n("tr",null,n("td",null," "),n("td",null," "))),n("tbody",null,r.map(function(t){return n("tr",null,n("td",null,n(wo,{size:40,chroma:xo(e,t),offset:fo.note.chroma(ko(e,t,o))})),n("td",null,n(Lo,{to:[e,t,o]},t)))})))},Oo=function(t){var e=t.tonic,r=t.names,o=t.title,i=t.type,u=t.packageName;return console.log("joder",r),n("div",{class:"{title}"},n("h1",null,o),n(ye,{packageName:u}),n(xe,{lines:["import "+i+' from "'+u+'"']}),n("p",null,"Or using tonal facade:"),n(xe,{lines:['import tonal from "tonal"']}),n("h3",null,"Names"),n(xe,{lines:["tonal."+i+'.names(); // => ["'+r[0]+'", "'+r[1]+'", ...]']}),n(_o,{names:r,type:i,tonic:e}))},Co=function(t){var e=t.tonic;return n(Oo,{title:"Scales",type:"scale",packageName:"tonal-scale",tonic:e,names:fo.scale.names()})},Fo=function(t){var e=t.tonic;return n(Oo,{title:"Chords",type:"chord",packageName:"tonal-chord",tonic:e,names:fo.chord.names()})},No=function(n,t){return"https://github.com/danigb/tonal/tree/master/packages/tonal/note#module_"+n+"."+t},Io=function(t){var e=t.module;return[n("h2",null,"API"),n(ye,{packageName:"tonal-"+e}),n("p",null,Object.keys(fo[e]).sort().map(function(t){return n("a",{class:"api",href:No(e,t),target:"_blank"},t)}))]},qo=Vex.Flow,zo=qo.Renderer,Do=qo.Formatter,Eo=function(n){return function(t){console.log("draw canvas",n),console.log("notes",n);var e=new zo(t,zo.Backends.CANVAS).getContext();e.clearRect(0,0,700,120);var r=new Vex.Flow.Stave(0,0,695);r.addClef("treble").setContext(e).draw();var o=4;Do.FormatAndDraw(e,r,n.map(function(n){var t=n.charAt(0),e=n.slice(1);0===fo.note.chroma(n)&&o++;var r=new Vex.Flow.StaveNote({keys:[t+"/"+o],duration:"q"});return console.log(t,e,o),e&&r.addAccidental(0,new Vex.Flow.Accidental(e)),r}))}},Bo=function(t){var e=t.notes;return n("div",{className:"Score"},n("canvas",{width:700,height:120,oncreate:Eo(e),onupdate:Eo(e)}),n("div",{className:"controls"}))},Go=function(n){return"["+n.map(function(n){return'"'+n+'"'}).join(", ")+"]"},So=function(n,t){return n?n+" "+t:t},Vo=fo.scale,$o=function(t){var e=t.tonic,r=t.name,o=fo.scale.intervals(r),i=fo.scale.notes(r,e),u=fo.note.chroma(e)||0,a=fo.scale.modes(r,e);return n("div",{class:"Scale"},n("h4",null,"scale"),n("h1",null,e," ",r),n("p",null,n(we,{route:function(n){return["scale",r,n]}})),n(wo,{size:160,offset:u,chroma:fo.pcset.chroma(o)}),n(Bo,{notes:i}),a.length&&[n("h2",null,"Scale modes"),n(_o,{type:"scale",names:a})],n(Io,{module:"scale"}),n(xe,{lines:['tonal.scale.exists("'+r+'"); // => '+Vo.exists(r),'tonal.scale.intervals("'+r+'"); // => '+Go(o),'tonal.scale.notes("'+So(e,r)+'"); // => '+Go(Vo.notes(r,e))]}))},To=function(t){return n("div",{class:"Chord"},n("h1",null,t.tonic+t.name))},Uo=function(t){return n("div",{class:"Welcome"},n("h1",null,"tonal"),n(ye,{packageName:"tonal"}),n(xe,{lines:['import tonal from "tonal";','tonal.note.freq("A4") // => 440','tonal.note.midi("A4") // => 69']}),n("pre",null),n("h3",null,n(Lo,{to:["notes"]},"Notes")),n(we,{route:function(n){return["note",n]}}),n(xe,{lines:['tonal.note.freq("A4") // => 440','tonal.note.midi("A4") // => 69']}),n("h3",null,n(Lo,{to:["intervals"]},"Intervals")))},Ro=function(n){return"#/"+n.filter(function(n){return"string"==typeof n}).map(function(n){return n.replace(/ /g,"_")}).join("/")},Ko=function(n){return n.split("/").map(function(n){return n.replace(/_/g," ")})},Lo=function(t,e){var r=t.to;return n("a",{href:Ro(r)},e)},Ho=function(t){var e=t.route;switch(e[0]){case"note":case"notes":return n(jo,{tonic:e[1]});case"scales":return n(Co,{tonic:e[1]});case"scale":return n($o,{name:e[1],tonic:e[2]});case"chords":return n(Fo,{tonic:e[1]});case"chord":return n(To,{name:e[1],tonic:e[2]});default:return n(Uo,null)}};!function(n){function t(n,e,r){Object.keys(e||[]).map(function(u){var a=e[u],m=r?r+"."+u:u;"function"==typeof a?n[u]=function(n){i("action",{name:m,data:n});var t=i("resolve",a(s,b,n));return"function"==typeof t?t(o):o(t)}:t(n[u]||(n[u]={}),a,m)})}function e(n){for(f=l(g,f,d,d=i("render",h)(s,b),p=!p);n=ve.pop();)n()}function r(){h&&!p&&requestAnimationFrame(e,p=!p)}function o(n){return"function"==typeof n?o(n(s)):(n&&(n=i("update",u(s,n)))&&r(s=n),s)}function i(n,t){return(v[n]||[]).map(function(n){var e=n(s,b,t);null!=e&&(t=e)}),t}function u(n,t){var e={};for(var r in n)e[r]=n[r];for(var r in t)e[r]=t[r];return e}function a(n){if(n&&(n=n.data))return n.key}function m(n,t){if("string"==typeof n)e=document.createTextNode(n);else{var e=(t=t||"svg"===n.tag)?document.createElementNS("http://www.w3.org/2000/svg",n.tag):document.createElement(n.tag);n.data&&n.data.oncreate&&ve.push(function(){n.data.oncreate(e)});for(var r in n.data)c(e,r,n.data[r]);for(r=0;r<n.children.length;)e.appendChild(m(n.children[r++],t))}return e}function c(n,t,e,r){if("key"===t);else if("style"===t)for(var o in u(r,e=e||{}))n.style[o]=e[o]||"";else{try{n[t]=e}catch(n){}"function"!=typeof e&&(e?n.setAttribute(t,e):n.removeAttribute(t))}}function P(n,t,e){for(var r in u(t,e)){var o=e[r],i="value"===r||"checked"===r?n[r]:t[r];o!==i&&c(n,r,o,i)}e&&e.onupdate&&ve.push(function(){e.onupdate(n,t)})}function M(n,t,e){e&&e.onremove?e.onremove(t):n.removeChild(t)}function l(n,t,e,r,o,i){if(null==e)t=n.insertBefore(m(r,o),t);else if(null!=r.tag&&r.tag===e.tag){P(t,e.data,r.data),o=o||"svg"===r.tag;for(var u=r.children.length,c=e.children.length,s={},f=[],d={},p=0;p<c;p++)b=f[p]=t.childNodes[p],null!=(j=a(v=e.children[p]))&&(s[j]=[b,v]);for(var p=0,h=0;h<u;){var b=f[p],v=e.children[p],A=r.children[h];if(d[j=a(v)])p++;else{var g=a(A),y=s[g]||[];null==g?(null==j&&(l(t,b,v,A,o),h++),p++):(j===g?(l(t,y[0],y[1],A,o),p++):y[0]?(t.insertBefore(y[0],b),l(t,y[0],y[1],A,o)):l(t,b,null,A,o),h++,d[g]=A)}}for(;p<c;){var j=a(v=e.children[p]);null==j&&M(t,f[p],v.data),p++}for(var p in s){var w=(y=s[p])[1];d[w.data.key]||M(t,y[0],w.data)}}else t&&r!==t.nodeValue&&("string"==typeof r&&"string"==typeof e?t.nodeValue=r:(t=n.insertBefore(m(r,o),i=t),M(n,i,e.data)));return t}var s,f,d,p,h=n.view,b={},v={},A=n.mixins||[],g=n.root||document.body;A.concat(n).map(function(n){n="function"==typeof n?n(i):n,Object.keys(n.events||[]).map(function(t){v[t]=(v[t]||[]).concat(n.events[t])}),s=u(s,n.state),t(b,n.actions)}),r((d=i("load",f=g.children[0]))===f&&(d=f=null))}({state:{route:[]},view:function(t){return n("div",null,n("p",{id:"top"},n(Lo,{to:["tonal"]},"tonal")," | ",n(Lo,{to:["notes"]},"notes")," | ",n(Lo,{to:["intervals"]},"intervals")," | ",n(Lo,{to:["scales"]},"scales")," | ",n(Lo,{to:["chords"]},"chords")),n(Ho,{route:t.route}))},actions:{route:function(n,t,e){return{route:Ko(e)}}},events:{load:function(n,t){console.log("load!"),window.onhashchange=function(){t.route(location.hash.slice(2))},window.onhashchange()}}})}();
